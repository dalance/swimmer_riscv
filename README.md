Swimmer-RISCV
=============

Instruction set simulator for RISC-V

## Description

Swimmer-RISCV is configurable instruction set simulator written in C++.

## Demo

## VS.

riscv-isa-sim(Spike) is very fast and simple RISC-V simulator written in C++.

Swimmer-RISCV is designed for debugging RISC-V program, using `--trace-hier` option can generate function call tree.
`--debug` option can generate all information such as register read/write and memory access.

## Requirement

### Linux

Swimmer-RISCV is tested on Ubuntu 18.04 LTS and CentOS 7.2 with GCC 8.1.0
For Ubuntu, following packages are need to be install:

```sh
sudo apt install -y libbfd-dev device-tree-compiler
```

### RISC-V Tools

riscv-tests repository is used to run regression test using Swimmer-RISCV.
It is recommended to install riscv-tools and $RISCV environment variable should be set.

## Usage

```
usage: ./swimmer_riscv [options] ...
options:
      --max_size          Max size of log file [MB] (unsigned int [=0])
      --max               Max instructions to simulate (unsigned long [=0])
      --binfile           Binary file to simulate. (string [=])
      --hexfile           Hex file to simulate. (string [=])
      --only_info_load    Debug Info is only loaded (only enable with --binfile)
      --debug             Generate debug log
      --out               Output log filename (string [=])
      --load-dump         Dump Loaded Bin file (only enable with --binfile)
      --parallel          CPU Parallel Execution
      --init_pc           Initial Program Counter Value (string [=])
      --stop-host         Stop simulation by accessing MTOHOST
      --use-pk            Location of RISC-V Proxy Kernel (string [=])
      --bit-mode          Execution Bit-Mode (32 or 64) (unsigned int [=64])
      --trace-hier        Generate Hierarcical Trace
      --trace-out         Hierarcical Trace Output Filename (string [=])
      --vmlinux           Location of vmlinux (string [=])
      --logstart          cycle of log start (unsigned long [=0])
      --printstep         print number of steps each cycle (unsigned long [=0])
      --signature         Generate Signature and filename  (string [=])
  -v, --version           Show Version Information
  -?, --help              print this message
```

### Run single elf program

```sh
$ cat test.c
#include <stdio.h>
main () { printf("Hello"); }

$ riscv64-unknown-elf-gcc test.c -o test.elf
$ swimmer_riscv --binfile test.elf
Hello
```

### Run Linux

Now Swimmer-RISCV supports Linux binary generated by Freedom-U-SDK.

```sh
$ swimmer_riscv --binfile freedom-u-sdk/work/riscv-pk/bbl
```

## Install

For Release Build:

```sh
cd build
cmake . -DCMAKE_BUILD_TYPE=Release
make
```

## Contribution

## Author

[msyksphinz](https://github.com/msyksphinz)
